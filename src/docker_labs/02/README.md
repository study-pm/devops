# Lab #2: Create an image with ADD instruction
https://dockerlabs.collabnix.com/beginners/dockerfile/Lab-2-Create-an-image-with-ADD-instruction.html

`COPY` and `ADD` are both Dockerfile instructions that serve similar purposes. They let you copy files from a specific location into a Docker image.

`COPY` takes in a src and destination. It only lets you copy in a local file or directory from your host (the machine building the Docker image) into the Docker image itself.

`ADD` lets you do that too, but it also supports 2 other sources. First, you can use a URL instead of a local file / directory. Secondly, you can extract a tar file from the source directly into the destination.

- [Assignment](#assignment)
- [Command Line Tools](#command-line-tools)
  - [Start the service](#start-the-service)
  - [Stop the service](#stop-the-service)
  - [Underlying commands](#underlying-commands)
    - [Pre-requisite](#pre-requisite)
    - [Creating Dockerfile](#creating-dockerfile)
    - [Build Docker Image](#build-docker-image)
    - [Tagging image as labs-add](#tagging-image-as-labs-add)
    - [Verify the Images](#verify-the-images)
    - [Create a container](#create-a-container)
    - [Enter into Container Shell](#enter-into-container-shell)
    - [Verify if the link has been extracted onto the container](#verify-if-the-link-has-been-extracted-onto-the-container)
- [Troubleshooting / Utils / Trivia](#troubleshooting--utils--trivia)

## Assignment
- Create an image with `ADD` instruction
- Tag your image as `labs-add:v1.0`
- Create a container based on that image, and see the extracted tar file.

## Command Line Tools
There are two prime commands for managing (starting and stopping) the provided service.

### Start the service
The following command runs the full command sequence:
```sh
$ ./start
```

alternatively:
```sh
$ sh start
```

### Stop the service
The following command clears all of the output (removing all possible side-effects) generated by running the *start* command:
```sh
$ ./clear
```

alternatively:
```sh
$ sh clear
```

### Underlying commands
There are multiple underlying scripts used for building the service functions. The sections below describe the commands used for managing the provided service and building the necessary resources.

#### Pre-requisite
There should be the following files (committed) in your working directory:
- *build.Dockerfile*

In case any of them missing, run the *[create.sh](./create.sh)* script before executing the *start* command.

#### Creating Dockerfile
```docker
FROM alpine:3.5
RUN apk update
ADD http://www.vlsitechnology.org/pharosc_8.4.tar.gz .
```

Placed into *[create.sh](./create.sh)*.

#### Build Docker Image
```sh
docker build -t saiyam911/alpine-add . -f <name of dockerfile>
```

Placed into *[build.sh](./build.sh)*.

#### Tagging image as labs-add
```sh
docker tag saiyam911/alpine-add saiyam911/labs-add:v1.0
```

Placed into *[tag.sh](./tag.sh)*.

#### Verify the Images
```sh
$ docker images
REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE
saiyam911/alpine-add        latest              cdf97cb49d48        38 minutes ago       300MB
saiyam911/labs-add          v1.0                cdf97cb49d48        38 minutes ago       300MB
```

Placed into *[verify.sh](./verify.sh)*.

#### Create a container
```sh
docker run -itd saiyam911/labs-add:v1.0 /bin/sh
```

Placed into *[run.sh](./run.sh)*.

List containers:

```sh
$ docker ps
CONTAINER ID        IMAGE                      COMMAND             CREATED             STATUS              PORTS               NAMES
3e26a5268f55        ajeetraina/labs-git:v1.0   "/bin/sh"           4 seconds ago       Up 2 seconds                            elated_neumann
```

Placed into *[list.sh](./list.sh)*.

#### Enter into Container Shell
```sh
docker attach f094
```

Placed into *[attach.sh](./attach.sh)*.

Please press <kbd>Enter</kbd> key twice so as to enter into container shell

#### Verify if the link has been extracted onto the container
Type in the following after entering into the respective container shell:
```
/ # ls -ltr
-rw-------    1 root     root     295168000 Sep 19  2007 pharosc_8.4.tar.gz
```

`ADD` Command lets you to add a tar directly from a link and explode to the container.

## Troubleshooting / Utils / Trivia
If you get the *permission denied* error while building the service scripts, make the script file executable:
```sh
$ chmod +x start
```

or:
```
$ chmod u+x clear
```
