<link href="styles.css" rel="stylesheet">

# МДК.04.01 Внедрение и поддержка программного обеспечения компьютерных систем
6735e93d5040133e8429e656

- [Изучаем Docker](#изучаем-docker)
  - [Изучаем Docker, часть 1: основы / Хабр](#изучаем-docker-часть-1-основы--хабр)
    - [Метафоры и Docker](#метафоры-и-docker)
    - [Контейнер](#контейнер)
    - [Живые организмы](#живые-организмы)
    - [Программное обеспечение](#программное-обеспечение)
    - [Концепции Docker](#концепции-docker)
      - [▍Виртуальные машины](#виртуальные-машины)
      - [▍Образ контейнера Docker](#образ-контейнера-docker)
      - [▍Файл Dockerfile](#файл-dockerfile)
      - [▍Контейнер Docker](#контейнер-docker)
      - [▍Репозиторий контейнеров](#репозиторий-контейнеров)
    - [Готовим с Docker](#готовим-с-docker)
    - [Итоги](#итоги)
  - [Изучаем Docker, часть 2: термины и концепции / Хабр](#изучаем-docker-часть-2-термины-и-концепции--хабр)
    - [Термины экосистемы Docker](#термины-экосистемы-docker)
    - [Механизмы Docker](#механизмы-docker)
      - [▍Платформа Docker](#платформа-docker)
      - [▍Движок Docker](#движок-docker)
      - [▍Клиент Docker](#клиент-docker)
      - [▍Демон Docker](#демон-docker)
      - [▍Тома Docker](#тома-docker)
      - [▍Реестр Docker](#реестр-docker)
      - [▍Хаб Docker](#хаб-docker)
      - [▍Репозиторий Docker](#репозиторий-docker)
    - [Масштабирование решений, основанных на контейнерах](#масштабирование-решений-основанных-на-контейнерах)
      - [▍Сеть Docker](#сеть-docker)
      - [▍Docker Compose](#docker-compose)
      - [▍Docker Swarm](#docker-swarm)
      - [▍Сервисы Docker](#сервисы-docker)
    - [Краткий перечень терминов](#краткий-перечень-терминов)
    - [Kubernetes](#kubernetes)
    - [Итоги: печём пончики с Docker](#итоги-печём-пончики-с-docker)

## Изучаем Docker
673865ea5040133e8429e66f

Автор [оригинала](https://towardsdatascience.com/learn-enough-docker-to-be-useful-b7ba70caeb4b): Jeff Hale

Технологии контейнеризации приложений нашли широкое применение в сферах разработки ПО и анализа данных. Эти технологии помогают сделать приложения более безопасными, облегчают их развёртывание и улучшают возможности по их масштабированию. Рост и развитие технологий контейнеризации можно считать одним из важнейших трендов современности.

### Изучаем Docker, часть 1: основы / Хабр
[673887bb5040133e8429e675](https://habr.com/ru/companies/ruvds/articles/438796/)

<dfn title="docker">Docker</dfn> — это платформа, которая предназначена для разработки, развёртывания и запуска приложений в контейнерах. Слово «Docker» в последнее время стало чем-то вроде синонима слова «контейнеризация». И если вы ещё не пользуетесь Docker, но при этом работаете или собираетесь работать в сферах разработки приложений или анализа данных, то Docker — это то, с чем вы непременно встретитесь в будущем.

Если вы пока не знаете о том, что такое Docker, сейчас у вас есть шанс сделать первый шаг к пониманию этой платформы. А именно, освоив этот материал, вы разберётесь с основами Docker и попутно приготовите пиццу.

#### Метафоры и Docker

Мы постоянно сталкиваемся с метафорами. Если заглянуть в словарь Ожегова, то окажется, что метафора — это «скрытое образное сравнение, уподобление одного предмета, явления другому». Метафоры помогают нам ухватывать суть новых для нас явлений. Например, виртуальные контейнеры можно сравнить с обычными пластиковыми контейнерами. Такое сравнение, через сопоставление уже известных нам свойств обычных контейнеров со свойствами виртуальных контейнеров, поможет сначала с ними познакомиться, а потом и понять их сущность.

Как вы понимаете, мы собираемся начать разговор о Docker с понятия «контейнер».

#### Контейнер

Как и обычный пластиковый контейнер, контейнер Docker обладает следующими характеристиками:

*[AWS]: Amazon Web Services

1. В нём можно что-то хранить. Нечто может находиться либо в контейнере, либо за его пределами.
2. Его можно переносить. Контейнер Docker можно использовать на локальном компьютере, на компьютере коллеги, на сервере поставщика облачных услуг (вроде AWS). Это роднит контейнеры Docker с обычными контейнерами, в которых, например, перевозят разные милые сердцу безделушки при переезде в новый дом.
3. В контейнер удобно что-то класть и удобно что-то из него вынимать. У обычного контейнера есть крышка на защёлках, которую надо снять для того, чтобы что-то положить в контейнер или что-то из него вынуть. У контейнеров Docker есть нечто подобное, представляющее их интерфейс, то есть — механизмы, позволяющие им взаимодействовать с внешним миром. Например, у контейнера есть порты, которые можно открывать для того, чтобы к приложению, работающему в контейнере, можно было бы обращаться из браузера. Работать с контейнером можно и средствами командной строки.
4. Если вам нужен контейнер, его можно заказать в интернет-магазине. Пустой контейнер можно купить, например, на сайте Amazon. В этот магазин контейнеры попадают от производителей, которые делают их в огромных количествах, используя пресс-формы. В случае с контейнерами Docker то, что можно сравнить с пресс-формой, а именно — образ контейнера, хранится в специальном репозитории. Если вам нужен некий контейнер, вы можете загрузить из репозитория соответствующий образ, и, используя его, этот контейнер создать.

Конечно, пластиковые контейнеры, в отличие от контейнеров Docker, никто вам не будет присылать бесплатно, да и когда вы их получите, они будут пустыми. А вот в контейнерах Docker всегда есть что-то интересное.

#### Живые организмы

Ещё один подход к размышлениям о контейнерах Docker заключается в сравнении их с экземплярами живых организмов. «Экземпляр» — это нечто, существующее в некоей форме. Это не просто код. Это код, который стал причиной существования чего-то большего, чем он сам, чего-то, образно говоря, живого. Как и другие живые организмы, экземпляры контейнеров появляются на свет, живут и умирают.

Контейнеры Docker — это вызванные к жизни образы Docker.

#### Программное обеспечение

Контейнеры Docker можно сравнивать не только с обычными контейнерами или с живыми организмами. Их можно сравнить и с программами. В конце концов, контейнеры — это программы. И, на фундаментальном уровне, контейнер представляет собой набор инструкций, который выполняется на некоем процессоре, обрабатывая какие-то данные.

Во время выполнения контейнера Docker внутри него обычно выполняется какая-то программа. Она выполняет в контейнере некие действия, то есть — делает что-то полезное.

Например, код, который работает в контейнере Docker, возможно, отправил на ваш компьютер тот текст, который вы сейчас читаете. Вполне возможно и то, что именно код, выполняющийся в контейнере Docker, принимает голосовые команды, которые вы даёте Amazon Alexa, и преобразует их в инструкции для ещё каких-нибудь программ, работающих в других контейнерах.

Благодаря использованию Docker можно, на одном и том же компьютере, одновременно запускать множество контейнеров. И, как и любые другие программы, контейнеры Docker можно запускать, останавливать, удалять. Можно исследовать их содержимое и создавать их.

#### Концепции Docker

##### ▍Виртуальные машины

Предшественниками контейнеров Docker были виртуальные машины. Виртуальная машина, как и контейнер, изолирует от внешней среды приложение и его зависимости. Однако контейнеры Docker обладают преимуществами перед виртуальными машинами. Так, они потребляют меньше ресурсов, их очень легко переносить, они быстрее запускаются и приходят в работоспособное состояние. В этом материале можно найти подробное сравнение контейнеров и виртуальных машин.

##### ▍Образ контейнера Docker

Выше мы уже говорили об «образах». Что это такое? Хороший вопрос. То, что в терминологии Docker называется «образом», или, по-английски, «image», это совсем не то же самое, что, например, фотография (это — одно из значений слова «image»).

Образы контейнеров Docker можно сравнить с чертежами, с формочками для печенья, или с пресс-формами для изготовления пластиковых изделий. Образы — это неизменные шаблоны, которые используются для создания одинаковых контейнеров.

В образе контейнера Docker содержится образ базовой операционной системы, код приложения, библиотеки, от которого оно зависит. Всё это скомпоновано в виде единой сущности, на основе которой можно создать контейнер.

##### ▍Файл Dockerfile

Файл [Dockerfile](https://docs.docker.com/reference/dockerfile/) содержит набор инструкций, следуя которым Docker будет собирать образ контейнера. Этот файл содержит описание базового образа, который будет представлять собой исходный слой образа. Среди популярных официальных базовых образов можно отметить [python](https://hub.docker.com/_/python/), [ubuntu](https://hub.docker.com/_/ubuntu), [alpine](https://hub.docker.com/_/alpine).

В образ контейнера, поверх базового образа, можно добавлять дополнительные слои. Делается это в соответствии с инструкциями из *Dockerfile*. Например, если *Dockerfile* описывает образ, который планируется использовать для решения задач машинного обучения, то в нём могут быть инструкции для включения в промежуточный слой такого образа библиотек NumPy, Pandas и Scikit-learn.

И, наконец, в образе может содержаться, поверх всех остальных, ещё один тонкий слой, данные, хранящиеся в котором, поддаются изменению. Это — небольшой по объёму слой, содержащий программу, которую планируется запускать в контейнере.

##### ▍Контейнер Docker

Для того чтобы запустить контейнер, нам нужен, во-первых, образ контейнера, во-вторых — среда, в которой установлен Docker, способная понять команду вида `docker run image_name`. Эта команда создаёт контейнер из образа и запускает его.

##### ▍Репозиторий контейнеров

Если вы хотите дать возможность другим людям создавать контейнеры на основе вашего образа, вы можете отправить этот образ в облачное хранилище. Самым крупным подобным хранилищем является репозиторий [Docker Hub](https://hub.docker.com/). Он используется при работе с Docker по умолчанию.

Мы уже довольно много всего обсудили. Пришло время собрать всё это вместе и сравнить работу с контейнерами Docker с приготовлением пиццы.

#### Готовим с Docker

- Рецепт приготовления пиццы — это файл *Dockerfile*. Он сообщает нам о том, что нужно сделать для того, чтобы достичь цели, то есть — получить работающий контейнер.
- Ингредиенты, из которых состоит пицца — это слои образа контейнера. Для нашей пиццы понадобится корж, соус и сыр.

Если положить на стол рецепт и ингредиенты, то получится, что в одном месте собрано всё, что нужно для того, чтобы приготовить пиццу. Это всё можно сравнить с образом контейнера Docker.
Из рецепта (*Dockerfile*) можно узнать о том, какую последовательность действий нужно выполнить для того, чтобы приготовить пиццу:

- Корж уже готов к использованию, мы его не меняем. Его можно сравнить с базовым образом ОС Ubuntu. Это — нижний слой образа, его в образ добавляют первым.
- Затем на корж добавляют сыр. Это — всё равно что добавить в образ второй слой в виде какой-то внешней библиотеки наподобие NumPy.
- Затем, поверх сыра, добавляют соус. Это — код приложения, которое должно запускаться в контейнере.

Теперь пришло время готовить пиццу в духовке.

Духовка, в которой готовится пицца, напоминает платформу Docker. Духовку устанавливают на кухне, с её помощью можно готовить еду. Точно так же Docker устанавливают на компьютере для того, чтобы «готовить» контейнеры.

Духовку, если она электрическая, включают, поворачивая ручку регулятора температуры. Команда `docker run image_name` — это нечто вроде такого регулятора температуры, «поворот» которого приводит к тому, что система создаёт и запускает контейнер.

Готовая пицца — это и есть контейнер Docker.

А есть пиццу — значит пользоваться приложением, запущенным в контейнере.

Как и приготовление пиццы, подготовка к работе контейнеров Docker занимает некоторое время, но в финале и в том и в другом случаях получается что-то вкусное.

#### Итоги

Здесь мы, на концептуальном уровне, рассмотрели основы Docker. Надеемся, приведённые здесь сравнения помогли вам разобраться в том, что такое Docker, и ощутить ценность метафор в деле освоения новых технологий.

### Изучаем Docker, часть 2: термины и концепции / Хабр
[67389b575040133e8429e677](https://habr.com/ru/companies/ruvds/articles/439978/)

В первой части перевода серии материалов, посвящённых Docker, мы сделали общий обзор этой системы. В частности, мы говорили о том, почему технологии контейнеризации важны в наше время, о том, что такое контейнеры Docker, и о том, с чем их можно сравнить. Сегодня мы поговорим об экосистеме Docker и рассмотрим важные термины, с которыми вы можете столкнуться на пути изучения и использования Docker. Продолжив аналогию с разными вкусностями, представим, что наши термины — это пончики. Дюжина пончиков.

#### Термины экосистемы Docker

Я разбил термины, с которыми вы можете столкнуться в ходе работы с Docker, на две части. Думаю, это облегчит их запоминание. Первый блок терминов будет относиться к механизмам Docker. Второй — к средствам масштабирования решений, основанных на контейнерах.

#### Механизмы Docker

##### ▍Платформа Docker
<dfn title="платформа Docker">Платформа Docker</dfn> ([Docker Platform](https://docs.docker.com/engine/docker-overview/#the-docker-platform)) — это программа, которая даёт нам возможность упаковывать приложения в контейнеры и запускать их на серверах. Платформа Docker позволяет помещать в контейнеры код и его зависимости. Как результат, системы, основанные на контейнерах, легко масштабировать, так как контейнеры можно переносить и воспроизводить.

##### ▍Движок Docker
<dfn title="движок Docker">Движок Docker</dfn> ([Docker Engine](https://www.docker.com/products/docker-engine)) — это клиент-серверное приложение. Компания Docker разделила движок Docker на два продукта. [Docker Community Edition](https://docs.docker.com/install/) (CE) — это бесплатное ПО, во многом основанное на опенсорсных инструментах.

Вероятно, вы будете пользоваться именно этой версией Docker. [Docker Enterprise](https://www.docker.com/products/docker-enterprise) — это платная версия системы, дающая пользователям дополнительные возможности в области поддержки систем, управления ими и безопасности. Платная версия Docker даёт компании средства, необходимые для её существования.

##### ▍Клиент Docker

![Клиент Docker и другие механизмы экосистемы](./img/cb662057b01093d7d63715d2d54c8429.png "Клиент Docker и другие механизмы экосистемы")

*Клиент Docker и другие механизмы экосистемы (взято из [документации](https://docs.docker.com/engine/docker-overview/))*

Клиент Docker ([Docker Client](https://docs.docker.com/engine/docker-overview/)) — это основное средство, которое используют для взаимодействия с Docker. Так, при работе с интерфейсом командной строки Docker ([Docker Command Line Interface](https://docs.docker.com/engine/reference/commandline/cli/), CLI), в терминал вводят команды, начинающиеся с ключевого слова docker, обращаясь к клиенту. Затем клиент использует API Docker для отправки команд демону Docker.

##### ▍Демон Docker

<dfn title="демон Docker">Демон Docker</dfn> ([Docker Daemon](https://docs.docker.com/engine/docker-overview/)) — это сервер Docker, который ожидает запросов к API Docker. Демон Docker управляет образами, контейнерами, сетями и томами.

##### ▍Тома Docker
Тома Docker ([Docker Volumes](https://docs.docker.com/storage/volumes/)) представляют собой наиболее предпочтительный механизм постоянного хранения данных, потребляемых или производимых приложениями.

##### ▍Реестр Docker

<dfn title="реестр Docker">Реестр Docker</dfn> ([Docker Registry](https://hub.docker.com/)) представляет собой удалённую платформу, используемую для хранения образов Docker. В ходе работы с Docker образы отправляют в реестр и загружают из него. Подобный реестр может быть организован тем, кто пользуется Docker. Кроме того, поставщики облачных услуг могут поддерживать и собственные реестры. Например, это касается [AWS](https://aws.amazon.com/ecr/) и [Google Cloud](https://cloud.google.com/container-registry/).

##### ▍Хаб Docker

<dfn title="хаб Docker">Хаб Docker</dfn> ([Docker Hub](https://hub.docker.com/)) — это самый крупный реестр образов Docker. Кроме того, именно этот реестр используется при работе с Docker по умолчанию. Пользоваться хабом Docker можно бесплатно.

##### ▍Репозиторий Docker

<dfn title="репозиторий docker">Репозиторием Docker</dfn> ([Docker Repository](https://docs.docker.com/docker-hub/repos/)) называют набор образов Docker, обладающих одинаковыми именами и разными тегами. Теги — это идентификаторы образов.

Обычно в репозиториях хранятся разные версии одних и тех же образов. Например, [Python](https://hub.docker.com/_/python) — это имя популярнейшего официального репозитория Docker на хабе Docker. А вот Python:3.7-slim — это версия образа с тегом 3.7-slim в репозитории Python. В реестр можно отправить как целый репозиторий, так и отдельный образ.

Теперь поговорим о терминах экосистемы Docker, имеющих отношение к масштабированию.

#### Масштабирование решений, основанных на контейнерах

Следующие четыре термина имеют отношение к одновременному использованию нескольких контейнеров.

##### ▍Сеть Docker

![Сеть Docker](./img/d4536a49030b09ebbe0adb09ec4e0598.png "Сеть Docker")

*Сеть Docker (взято из [документации](https://docs.docker.com/engine/tutorials/networkingcontainers/))*

Сетевые механизмы Docker ([Docker Networking](https://docs.docker.com/engine/tutorials/networkingcontainers/)) позволяют организовывать связь между контейнерами Docker. Соединённые с помощью сети контейнеры могут выполняться на одном и том же хосте или на разных хостах. Подробности о сетевой подсистеме Docker можно почитать [здесь](https://www.oreilly.com/learning/what-is-docker-networking).

##### ▍Docker Compose

[Docker Compose](https://docs.docker.com/compose/) — это инструмент, который упрощает развёртывание приложений, для работы которых требуется несколько контейнеров Docker. Docker Compose позволяет выполнять команды, описываемые в файле *docker-compose.yml*. Эти команды можно выполнять столько раз, сколько потребуется. Интерфейс командной строки Docker Compose упрощает взаимодействие с многоконтейнерными приложениями. Этот инструмент устанавливается при установке Docker.

##### ▍Docker Swarm

[Docker Swarm](https://docs.docker.com/engine/swarm/) — это решение, предназначенное для управления контейнерными развёртываниями (то есть, как говорят, для оркестрации контейнеров). В [этом](https://docs.docker.com/get-started/#recap-and-cheat-sheet) материале из официального учебного курса по Docker можно найти сведения о Docker Swarm. Мне хотелось бы порекомендовать вам не тратить время на изучение Docker Swarm в том случае, если у вас нет на то веской причины.

##### ▍Сервисы Docker

<dfn title="сервис Docker">Сервисы Docker</dfn> ([Docker Services](https://docs.docker.com/get-started/part3/#introduction)) — это различные части распределённого приложения. Вот что о них говорится в [документации](https://docs.docker.com/get-started/part3/#introduction):

> Сервисы — это всего лишь «контейнеры в продакшне». В пределах сервиса выполняется лишь один образ, но сервис определяет то, как именно выполняется образ. В частности, речь идёт о том, какие порты должны использоваться, сколько реплик контейнера должно выполняться для того, чтобы сервис обеспечивал бы необходимую вычислительную мощность, и так далее. Масштабирование сервисов предусматривает изменение количества экземпляров контейнера, в которых работает некая программа, благодаря чему сервису выделяется столько системных ресурсов, сколько ему требуется для решения некоей задачи.

Сервисы Docker позволяют масштабировать контейнеры в пределах нескольких демонов Docker, благодаря им существует и технология Docker Swarm.

#### Краткий перечень терминов

Давайте, буквально в двух словах, повторим только что представленные вам термины:

Механизмы Docker:

1. Платформа Docker — ПО, благодаря которому можно работать с контейнерами.
2. Движок Docker — клиент-серверное приложение (CE или Enterprise).
3. Клиент Docker — программа, которая позволяет взаимодействовать с демоном Docker посредством CLI.
4. Демон Docker — сервер Docker, отвечающий за управление ключевыми механизмами системы.
5. Тома Docker — хранилище информации, используемое в контейнерах.
6. Реестр Docker — удалённое хранилище образов.
7. Хаб Docker — самый крупный реестр Docker, используемый по умолчанию.
8. Репозиторий — коллекция образов Docker с одним и тем же именем.

Масштабирование:

1. Сетевая подсистема Docker — среда, которая позволяет организовывать взаимодействие контейнеров.
2. Docker Compose — технология, упрощающая работу с многоконтейнерными приложениями.
3. Docker Swarm — средство для управления развёртыванием контейнеров.
4. Сервисы Docker — контейнеры в продакшне.

Выше мы говорили о том, что рассмотрим дюжину терминов экосистемы Docker, сравнивая их с дюжиной пончиков. Мы рассмотрели уже 12 терминов, и, казалось бы, на этом можно и остановиться. Но мы, [на всякий случай](https://www.britannica.com/story/why-is-a-bakers-dozen-13), добавим в наш список ещё один термин.

Этот термин относится не к самой платформе Docker, а к технологии, которая очень часто используется совместно с Docker.

#### Kubernetes
[Kubernetes](https://kubernetes.io/) — это технология, которая позволяет автоматизировать развёртывание и масштабирование контейнеризированных приложений, а также управление ими. Это — бесспорный лидер рынка средств для оркестрации контейнеров. Если вам нужен инструмент для работы с группами контейнеров, для масштабирования решений, основанных на них, используйте не Docker Swarm, а Kubernetes. Kubernetes не является частью Docker. Они с Docker, скорее, похожи на лучших друзей.

Теперь, когда вы ознакомились с общими понятиями Docker и с терминологией, вы можете приступить к практическим экспериментам.

#### Итоги: печём пончики с Docker

Помните, как в прошлый раз мы сравнивали платформу Docker с духовкой, которую устанавливают в кухне? Сейчас самое время установить Docker на вашей «кухне» и что-нибудь приготовить.

Docker можно запускать локально на Linux, Mac и Windows. Если вы пользуетесь Mac или Windows, вы можете установить свежую версию Docker Desktop [отсюда](https://www.docker.com/products/docker-desktop). Вместе с этой программой, кстати, устанавливается и Kubernetes. Если вы устанавливаете Docker на другой платформе, то загляните [сюда](https://docs.docker.com/install/) для того, чтобы найти подходящую версию.

После установки Docker взгляните на первые две части [официального руководства](https://docs.docker.com/get-started/).

В следующий раз мы продолжим разговор о Docker. В частности, поговорим о файлах Dockerfile.
